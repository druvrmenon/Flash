/* ════════════════════════════════════════════════════
   FlashGen Quiz — Clean UI  (Outfit + DM Mono)
════════════════════════════════════════════════════ */

:root {
  --bg:       #0a0c17;
  --surface:  #10131f;
  --surface2: #171b2c;
  --border:   rgba(255,255,255,.08);
  --ink:      #f0f2ff;
  --ink-2:    #8892b0;
  --ink-3:    #4a5178;
  --mode-color: #7c6ffa;
  --mode-bg:    rgba(124,111,250,.1);
  --mode-border:rgba(124,111,250,.2);
  --correct: #22c55e;
  --wrong:   #ef4444;
  --warn:    #f59e0b;
  --radius:  14px;
  --font:    'Outfit', sans-serif;
  --mono:    'DM Mono', monospace;
}

*, *::before, *::after { box-sizing:border-box; margin:0; padding:0; }

html { color-scheme:dark; }

body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--ink);
  min-height: 100vh;
  font-size: 16px;
  line-height: 1.5;
  -webkit-tap-highlight-color: transparent;
}

.hidden { display: none !important; }

/* ── HUD ──────────────────────────────────────────── */
.hud {
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: .75rem 1.5rem;
  background: rgba(10,12,23,.9);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--border);
}
.hud-left  { display:flex; align-items:center; gap:.75rem; flex-shrink:0; }
.hud-center{ flex:1; display:flex; flex-direction:column; gap:.3rem; align-items:center; }
.brand { font-weight:700; font-size:1rem; letter-spacing:-.02em; }

.mode-badge {
  font-family: var(--mono);
  font-size:.65rem;
  font-weight:500;
  padding:.2rem .6rem;
  border-radius:100px;
  border:1px solid;
  letter-spacing:.04em;
}

.top-prog {
  width: 100%;
  max-width: 420px;
  height: 3px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}
.top-prog-fill {
  height: 100%;
  background: var(--mode-color);
  border-radius: 4px;
  transition: width .4s ease;
}

.hud-meta {
  font-family: var(--mono);
  font-size: .65rem;
  color: var(--ink-2);
  display: flex;
  align-items: center;
  gap: .4rem;
}
.hud-sep { color: var(--ink-3); }

.streak-display {
  display: inline-flex;
  align-items: center;
  gap: .25rem;
  color: var(--warn);
  font-weight: 600;
  transition: transform .15s;
}
.streak-display.pop { animation: pop .4s cubic-bezier(.34,1.56,.64,1); }
.streak-mult {
  font-size: .6rem;
  background: rgba(245,158,11,.2);
  padding:.1rem .35rem;
  border-radius:4px;
}

.exit-btn {
  flex-shrink: 0;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--ink-2);
  border-radius: 8px;
  padding: .35rem .75rem;
  font-family: var(--mono);
  font-size: .65rem;
  cursor: pointer;
  transition: all .15s;
}
.exit-btn:hover { border-color:rgba(255,255,255,.2); color:var(--ink); }

/* ── START SCREEN ─────────────────────────────────── */
#start-screen {
  min-height: 100vh;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 3rem 1.5rem 4rem;
}
.start-inner {
  width: 100%;
  max-width: 820px;
}
.start-header { margin-bottom: 2rem; }
.start-logo {
  font-size: 1.6rem;
  font-weight: 800;
  letter-spacing: -.03em;
  margin-bottom: .25rem;
}
.start-sub {
  font-size: 1rem;
  color: var(--ink-2);
  font-weight: 400;
}

.deck-info {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem 1.25rem;
  margin-bottom: 2rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}
.deck-name { font-weight:600; font-size:.95rem; flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.deck-count { font-family:var(--mono); font-size:.7rem; color:var(--ink-2); flex-shrink:0; }

/* ── Difficulty cards ─────────────────────────────── */
.diff-section { margin-bottom: 2rem; }
.diff-label { font-size:.75rem; font-weight:600; letter-spacing:.08em; text-transform:uppercase; color:var(--ink-3); margin-bottom:.85rem; }

.diff-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}
@media(max-width:600px){ .diff-grid { grid-template-columns: 1fr; } }

.diff-card {
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  padding: 1.25rem;
  cursor: pointer;
  transition: all .18s;
  position: relative;
}
.diff-card:hover { border-color: rgba(255,255,255,.18); transform: translateY(-2px); }
.diff-card.active[data-mode="easy"]   { border-color: #22c55e; background: rgba(34,197,94,.06); }
.diff-card.active[data-mode="medium"] { border-color: #f59e0b; background: rgba(245,158,11,.06); }
.diff-card.active[data-mode="hard"]   { border-color: #ef4444; background: rgba(239,68,68,.06); }
.diff-card.active::after {
  content: '✓';
  position:absolute; top:.6rem; right:.8rem;
  font-size:.8rem; font-weight:700;
}
.diff-card.active[data-mode="easy"]::after   { color:#22c55e; }
.diff-card.active[data-mode="medium"]::after { color:#f59e0b; }
.diff-card.active[data-mode="hard"]::after   { color:#ef4444; }

.diff-top {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-bottom: .85rem;
}
.diff-emoji { font-size: 1.1rem; }
.diff-name  { font-size: 1rem; font-weight: 700; }

.diff-features {
  list-style: none;
  padding: 0;
  margin-bottom: .85rem;
  font-size: .8rem;
  color: var(--ink-2);
  display: flex;
  flex-direction: column;
  gap: .35rem;
}
.diff-features li::before { content:'· '; color:var(--ink-3); }

.diff-score {
  font-family: var(--mono);
  font-size: .65rem;
  color: var(--ink-3);
  padding: .25rem .6rem;
  background: var(--surface2);
  border-radius: 6px;
  display: inline-block;
}

/* ── Count row ────────────────────────────────────── */
.count-section { margin-bottom: 2rem; }
.count-label { font-size:.75rem; font-weight:600; letter-spacing:.08em; text-transform:uppercase; color:var(--ink-3); margin-bottom:.85rem; }

.count-row {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
}
.qc-btn {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .5rem 1.25rem;
  font-family: var(--mono);
  font-size: .85rem;
  color: var(--ink-2);
  cursor: pointer;
  transition: all .15s;
}
.qc-btn:hover:not(:disabled) { border-color:rgba(255,255,255,.2); color:var(--ink); }
.qc-btn.active { background:var(--mode-color,#7c6ffa); border-color:transparent; color:#fff; font-weight:600; }
.qc-btn:disabled { cursor:not-allowed; }

/* ── Start button ─────────────────────────────────── */
.start-btn {
  width: 100%;
  padding: 1rem;
  background: var(--mode-color, rgba(255,255,255,.08));
  border: 2px solid transparent;
  border-radius: var(--radius);
  font-family: var(--font);
  font-size: 1rem;
  font-weight: 600;
  color: #fff;
  cursor: pointer;
  transition: all .2s;
  letter-spacing: -.01em;
}
.start-btn:disabled {
  background: rgba(255,255,255,.05);
  color: var(--ink-3);
  cursor: not-allowed;
  font-weight: 400;
}
.start-btn:not(:disabled):hover { opacity: .9; transform: translateY(-1px); }

/* ── QUIZ SECTION ─────────────────────────────────── */
#quiz-section {
  min-height: calc(100vh - 60px);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 1.5rem 1rem 3rem;
}
.quiz-wrap {
  width: 100%;
  max-width: 620px;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* ── Timer row ────────────────────────────────────── */
.timer-row {
  display: grid;
  grid-template-columns: auto 1fr auto auto;
  align-items: center;
  gap: .75rem;
}
.q-num-label {
  font-family: var(--mono);
  font-size: .75rem;
  color: var(--ink-3);
  font-weight: 500;
  min-width: 28px;
}
.timer-track {
  height: 4px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}
.timer-fill {
  height: 100%;
  background: var(--mode-color);
  border-radius: 4px;
  transition: width .9s linear, background .3s;
}
.timer-fill.warn   { background: var(--warn); }
.timer-fill.danger { background: var(--wrong); animation: urgentPulse 1s ease infinite; }

.timer-num {
  font-family: var(--mono);
  font-size: .75rem;
  font-weight: 500;
  color: var(--ink-2);
  min-width: 22px;
  text-align: right;
}
.timer-num.warn   { color: var(--warn); }
.timer-num.danger { color: var(--wrong); }

.pts-possible {
  font-family: var(--mono);
  font-size: .65rem;
  color: var(--ink-3);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: .2rem .5rem;
  white-space: nowrap;
}

/* ── Question card ────────────────────────────────── */
.q-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  animation: slideUp .35s cubic-bezier(.4,0,.2,1) both;
}
.q-card-top {
  display: flex;
  align-items: center;
  gap: .6rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.q-tag {
  font-family: var(--mono);
  font-size: .6rem;
  font-weight: 500;
  letter-spacing: .06em;
  text-transform: uppercase;
  padding: .2rem .6rem;
  border-radius: 6px;
  border: 1px solid;
}
.tag-recall      { color:#a78bfa; background:rgba(167,139,250,.1); border-color:rgba(167,139,250,.2); }
.tag-formula     { color:#38bdf8; background:rgba(56,189,248,.1);  border-color:rgba(56,189,248,.2); }
.tag-diagram     { color:#fb923c; background:rgba(251,146,60,.1);  border-color:rgba(251,146,60,.2); }
.tag-concept     { color:#f0abfc; background:rgba(240,171,252,.1); border-color:rgba(240,171,252,.2); }
.tag-applied     { color:#34d399; background:rgba(52,211,153,.1);  border-color:rgba(52,211,153,.2); }
.tag-reverse     { color:#f59e0b; background:rgba(245,158,11,.1);  border-color:rgba(245,158,11,.2); }

.q-meta {
  font-family: var(--mono);
  font-size: .6rem;
  color: var(--ink-3);
  letter-spacing: .04em;
}

.fmt-label {
  font-size: .78rem;
  font-weight: 500;
  color: var(--ink-2);
  margin-bottom: .75rem;
  padding: .4rem .8rem;
  background: var(--surface2);
  border-radius: 8px;
  border: 1px solid var(--border);
}

/* T/F alleged answer block */
.tf-block {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1rem 1.25rem;
  margin-bottom: 1rem;
}
.tf-ans {
  font-size: .9rem;
  font-weight: 500;
  color: var(--ink);
  line-height: 1.6;
}

.q-text {
  font-size: 1.05rem;
  font-weight: 500;
  line-height: 1.6;
  color: var(--ink);
}

/* ── Options ──────────────────────────────────────── */
.opts-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: .65rem;
  animation: slideUp .35s .08s cubic-bezier(.4,0,.2,1) both;
}
@media(max-width:480px){ .opts-grid { grid-template-columns: 1fr; } }

.opt-btn {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  padding: .9rem 1rem;
  text-align: left;
  font-family: var(--font);
  font-size: .88rem;
  color: var(--ink);
  cursor: pointer;
  transition: all .15s;
  display: flex;
  align-items: flex-start;
  gap: .7rem;
  line-height: 1.45;
}
.opt-btn:hover:not(:disabled) {
  border-color: var(--mode-color);
  background: var(--mode-bg);
  transform: translateY(-1px);
}
.opt-letter {
  font-family: var(--mono);
  font-size: .7rem;
  font-weight: 600;
  background: var(--surface2);
  border-radius: 6px;
  padding: .15rem .45rem;
  flex-shrink: 0;
  margin-top: .1rem;
}
.opt-text { line-height: 1.45; }

/* T/F special styles */
.opt-tf-icon { font-size: 1.1rem; flex-shrink:0; }
.opt-tf-text { font-size: .9rem; font-weight:500; }

.opt-btn.correct {
  border-color: var(--correct);
  background: rgba(34,197,94,.1);
  animation: correctPop .35s cubic-bezier(.34,1.56,.64,1);
}
.opt-btn.correct .opt-letter { background:rgba(34,197,94,.2); color:var(--correct); }
.opt-btn.wrong {
  border-color: var(--wrong);
  background: rgba(239,68,68,.1);
  animation: wrongShake .35s ease;
}
.opt-btn.dim { opacity:.28; }

/* ── Hint ─────────────────────────────────────────── */
.hint-btn {
  align-self: flex-start;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .4rem .9rem;
  font-family: var(--font);
  font-size: .78rem;
  color: var(--ink-2);
  cursor: pointer;
  transition: all .15s;
  display: flex;
  align-items: center;
  gap: .4rem;
}
.hint-btn:hover:not(.used) { border-color:rgba(255,255,255,.2); color:var(--ink); }
.hint-btn.used { opacity:.4; cursor:default; }

/* ── Feedback ─────────────────────────────────────── */
.feedback {
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius);
  padding: .9rem 1.1rem;
  display: flex;
  align-items: center;
  gap: .75rem;
  opacity: 0;
  transform: translateY(6px);
  transition: all .2s;
  pointer-events: none;
}
.feedback.show { opacity:1; transform:translateY(0); pointer-events:auto; }
.feedback.correct { background:rgba(34,197,94,.08);  border-color:rgba(34,197,94,.2); }
.feedback.wrong   { background:rgba(239,68,68,.08);  border-color:rgba(239,68,68,.2); }
.feedback.timeout { background:rgba(245,158,11,.08); border-color:rgba(245,158,11,.2); }

.fb-icon {
  font-size: 1.1rem;
  font-weight: 700;
  flex-shrink: 0;
}
.feedback.correct .fb-icon { color: var(--correct); }
.feedback.wrong   .fb-icon { color: var(--wrong); }
.feedback.timeout .fb-icon { color: var(--warn); }

.fb-text { flex: 1; font-size: .88rem; line-height: 1.5; }
.fb-text strong { font-weight: 600; }
.correct-preview { font-size:.83rem; color:var(--ink-2); display:block; margin-top:.2rem; }
.streak-mult { display:inline-block; background:rgba(245,158,11,.2); color:var(--warn); border-radius:4px; padding:.1rem .35rem; font-size:.75rem; margin-left:.3rem; }

.fb-pts {
  font-family: var(--mono);
  font-size: .8rem;
  font-weight: 600;
  flex-shrink: 0;
  color: var(--correct);
}

/* ── Next button ──────────────────────────────────── */
.next-wrap { display: flex; justify-content: flex-end; }
.next-btn {
  background: var(--mode-color);
  border: none;
  border-radius: 10px;
  padding: .75rem 1.6rem;
  font-family: var(--font);
  font-size: .9rem;
  font-weight: 600;
  color: #fff;
  cursor: pointer;
  transition: all .15s;
  display: flex;
  align-items: center;
  gap: .5rem;
}
.next-btn:hover { opacity:.9; transform:translateY(-1px); }

/* ── Keyboard hint ────────────────────────────────── */
.kb-hint {
  text-align: center;
  font-family: var(--mono);
  font-size: .6rem;
  color: var(--ink-3);
  letter-spacing: .04em;
}
.kb-hint kbd {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: .1rem .35rem;
  font-family: var(--mono);
}

/* ── RESULTS SCREEN ───────────────────────────────── */
#results-screen {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  padding: 3rem 1.5rem 4rem;
}
.results-wrap {
  width: 100%;
  max-width: 680px;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.res-hero {
  text-align: center;
  padding: 2rem 1rem;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  animation: slideUp .4s cubic-bezier(.4,0,.2,1) both;
}
.res-trophy { font-size: 3.5rem; margin-bottom: .75rem; display:block; }
.res-score  { font-size: 3rem; font-weight: 800; letter-spacing: -.04em; line-height:1; }
.res-pct    { font-size: 1rem; color: var(--ink-2); margin-top: .35rem; }
.res-grade  { font-size: 1.15rem; font-weight: 600; margin-top: .35rem; }
.res-points { font-family:var(--mono); font-size:.85rem; color:var(--ink-2); margin-top:.5rem; }
.res-mode-badge { margin-top: .75rem; }

/* Stats grid */
.res-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: .65rem;
}
@media(max-width:500px){ .res-stats { grid-template-columns: repeat(2,1fr); } }
.rstat {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .85rem;
  text-align: center;
}
.rstat-n { font-size: 1.5rem; font-weight: 700; display:block; }
.rstat-l { font-size: .7rem; color: var(--ink-2); font-weight:400; display:block; margin-top:.15rem; font-family:var(--mono); }

/* Banners */
.res-banner.perfect { background:rgba(34,197,94,.1); border:1px solid rgba(34,197,94,.2); border-radius:10px; padding:.9rem 1.2rem; font-size:.9rem; font-weight:500; color:#4ade80; }
.res-banner.high    { background:rgba(245,158,11,.08);border:1px solid rgba(245,158,11,.18);border-radius:10px;padding:.9rem 1.2rem;font-size:.9rem;font-weight:500;color:#fbbf24; }

/* Results body sections */
.res-section { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:1.25rem; }
.res-section-title { font-size:.75rem; font-weight:600; letter-spacing:.08em; text-transform:uppercase; color:var(--ink-3); margin-bottom:1rem; }

/* Format breakdown */
.fmt-breakdown { display:flex; flex-direction:column; gap:.6rem; }
.fmt-row { display:grid; grid-template-columns:140px 1fr 70px; align-items:center; gap:.75rem; }
.fmt-lbl { font-size:.8rem; color:var(--ink-2); }
.fmt-bar-wrap { height:6px; background:var(--border); border-radius:4px; overflow:hidden; }
.fmt-bar { height:100%; border-radius:4px; background:var(--mode-color); transition:width .6s ease; }
.fmt-stat { font-family:var(--mono); font-size:.65rem; color:var(--ink-3); text-align:right; }

/* Weak topics */
.weak-tags { display:flex; flex-wrap:wrap; gap:.5rem; }
.weak-tag {
  font-family: var(--mono);
  font-size: .65rem;
  background: rgba(239,68,68,.1);
  border: 1px solid rgba(239,68,68,.2);
  color: #fca5a5;
  border-radius: 100px;
  padding: .25rem .7rem;
}

/* Question breakdown */
.bk-list { display:flex; flex-direction:column; gap:.5rem; }
.bk-row {
  display: grid;
  grid-template-columns: 24px 1fr auto;
  align-items: flex-start;
  gap: .75rem;
  padding: .7rem .85rem;
  border-radius: 8px;
  background: var(--surface2);
  font-size: .83rem;
}
.bk-row.bk-correct { border-left: 2px solid var(--correct); }
.bk-row.bk-wrong   { border-left: 2px solid var(--wrong); }
.bk-row.bk-timed   { border-left: 2px solid var(--warn); }

.bk-ic { font-size:.9rem; font-weight:700; color:var(--ink-3); padding-top:.1rem; }
.bk-row.bk-correct .bk-ic { color:var(--correct); }
.bk-row.bk-wrong   .bk-ic { color:var(--wrong); }
.bk-row.bk-timed   .bk-ic { color:var(--warn); }

.bk-body { display:flex; flex-direction:column; gap:.25rem; }
.bk-q { line-height:1.45; color:var(--ink); }
.bk-ans { font-size:.75rem; color:var(--ink-3); line-height:1.4; }

.bk-pts {
  font-family:var(--mono);
  font-size:.7rem;
  color:var(--correct);
  white-space:nowrap;
  padding-top:.1rem;
}

.hint-used-tag {
  font-family:var(--mono);
  font-size:.58rem;
  background:rgba(167,139,250,.15);
  color:#c4b5fd;
  border-radius:4px;
  padding:.1rem .35rem;
  margin-left:.4rem;
  vertical-align:middle;
}
.q-fmt-tag {
  font-family:var(--mono);
  font-size:.58rem;
  background:var(--surface);
  color:var(--ink-3);
  border-radius:4px;
  padding:.1rem .35rem;
  margin-left:.3rem;
  vertical-align:middle;
}

/* Results actions */
.res-actions {
  display: flex;
  gap: .75rem;
  flex-wrap: wrap;
  justify-content: center;
}
.res-btn {
  padding: .75rem 1.5rem;
  border-radius: 10px;
  font-family: var(--font);
  font-size: .88rem;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: all .15s;
}
.res-btn.primary  { background:var(--mode-color); color:#fff; }
.res-btn.secondary{ background:var(--surface); border:1px solid var(--border); color:var(--ink-2); }
.res-btn:hover { opacity:.9; transform:translateY(-1px); }

/* ── Animations ───────────────────────────────────── */
@keyframes slideUp {
  from { opacity:0; transform:translateY(16px); }
  to   { opacity:1; transform:translateY(0); }
}
@keyframes correctPop {
  0%   { transform:scale(1); }
  50%  { transform:scale(1.04); }
  100% { transform:scale(1); }
}
@keyframes wrongShake {
  0%,100%{ transform:translateX(0); }
  20%    { transform:translateX(-6px); }
  40%    { transform:translateX(6px); }
  60%    { transform:translateX(-4px); }
  80%    { transform:translateX(4px); }
}
@keyframes urgentPulse {
  0%,100%{ opacity:1; }
  50%    { opacity:.5; }
}
@keyframes pop {
  0%   { transform:scale(1); }
  50%  { transform:scale(1.25); }
  100% { transform:scale(1); }
}
@keyframes confettiFall {
  0%   { transform:translateY(-10px) rotate(0deg); opacity:1; }
  100% { transform:translateY(105vh) rotate(720deg); opacity:0; }
}

/* ── Scrollbar ────────────────────────────────────── */
::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:4px; }
